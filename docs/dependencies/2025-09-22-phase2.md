# Phase 2 Dependency Audit — 2025-09-22

## Runtime Enforcement
- Added `scripts/check-node.js` and `preinstall` hook to block Node < 20 / npm < 10 during installs.
- Enabled `engine-strict` via `.npmrc` so local installs respect `package.json` engine floor.
- Docker base image now pins `npm@10` to match the enforced minimum.

## Upgrades Applied
- Bumped Next.js toolchain (`next`, `eslint-config-next`, `@next/bundle-analyzer`) to 15.5.3 for recent security patches.
- Updated build tooling (`vite` 5.4.20, `@eslint/js` 9.36.0, `eslint` 9.36.0, `@typescript-eslint/*` 8.44.0, `@playwright/test` 1.55.0, `lint-staged` 16.1.6).
- Refreshed key runtime libs (`postprocessing` 6.37.8, `tailwindcss` 4.1.13, `web-vitals` 5.1.0, `zustand` 5.0.8, `@types/*` alignment).

## Outstanding Items / Backlog
- Major upgrades pending evaluation: Vite ≥7 + Vitest 3 (required to fully resolve esbuild advisory) — track under Phase 3 tooling modernization.
- React ecosystem patches (react 19.1.1, lucide-react 0.544.0, pmndrs stack) are available but deferred until rendering refactors in Phase 7.
- Depcheck flagged archived experimental files requiring `@motionone/react` and `react-knob-headless`; either remove the archived panel or add decision notes before Phase 5 cleanup.

## Audit Summary
- `npm audit` now reports four moderate issues tied to the Vite/esbuild chain; remediation requires coordinated major upgrades (see backlog above).
- No high/critical advisories remaining.

## Next Steps
1. Scope the Vite/Vitest major upgrade (compatibility notes, test plan) for Phase 3.
2. Review archived component dependencies during Phase 5 hygiene work.
3. Keep `npm outdated --long` snapshot updated per release cadence (recorded on 2025-09-22).
